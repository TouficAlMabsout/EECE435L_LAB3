<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lab3.main_PyQt5_sql &mdash; SchoolManagementSystem 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=f2a433a1"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            SchoolManagementSystem
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">lab3</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SchoolManagementSystem</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">lab3.main_PyQt5_sql</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for lab3.main_PyQt5_sql</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">QAbstractItemView</span><span class="p">,</span> <span class="n">QTableView</span><span class="p">,</span> <span class="n">QTableWidget</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">,</span> <span class="n">QComboBox</span><span class="p">,</span> <span class="n">QApplication</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QLabel</span><span class="p">,</span> <span class="n">QPushButton</span><span class="p">,</span> <span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QStackedWidget</span><span class="p">,</span> <span class="n">QMessageBox</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="n">Qt</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;../Database/schoolsystem.sqlite&#39;</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<div class="viewcode-block" id="SchoolManagementApp">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp">[docs]</a>
<span class="k">class</span> <span class="nc">SchoolManagementApp</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main application for managing students, instructors, and courses.</span>

<span class="sd">    This class serves as the main interface for the school management </span>
<span class="sd">    system. It provides functionality to add, edit, and delete students, </span>
<span class="sd">    instructors, and courses, as well as to display lists of these entities. </span>
<span class="sd">    The application also handles database connections and operations.</span>

<span class="sd">    :param parent: The parent widget for the application (default is None).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the School Management System application.</span>

<span class="sd">        This method sets up the main window for the application, including the </span>
<span class="sd">        title, geometry, and layout. It initializes a QStackedWidget to manage </span>
<span class="sd">        multiple screens (e.g., main menu, forms, and views for students, </span>
<span class="sd">        instructors, and courses). It adds all the necessary UI components and </span>
<span class="sd">        displays the main menu by default.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;School Management System&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>

        <span class="c1"># Initialize StackedWidget to hold different frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span> <span class="o">=</span> <span class="n">QStackedWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Main Menu Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_menu_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_main_menu</span><span class="p">()</span>

        <span class="c1"># Student Form Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_student_form</span><span class="p">()</span>

        <span class="c1"># Instructor Form Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_instructor_form</span><span class="p">()</span>

        <span class="c1"># Course Form Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_course_form</span><span class="p">()</span>

        <span class="c1"># Register for Course Form Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_course_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_register_course_form</span><span class="p">()</span>

        <span class="c1"># Assign Instructor to Course Form Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_assign_instructor_form</span><span class="p">()</span>

        <span class="c1"># Add new widgets for displaying all students, instructors, and courses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_students_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_students_view</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">display_instructors_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_instructors_view</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">display_courses_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_courses_view</span><span class="p">()</span>

        <span class="c1"># Search Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_search_form</span><span class="p">()</span>

        <span class="c1"># Add widgets to the stacked layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_menu_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_widget</span><span class="p">)</span>

        <span class="c1"># Add new widgets for views and search</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_students_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_instructors_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_courses_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_widget</span><span class="p">)</span>

        <span class="c1"># Set the main layout</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Show main menu initially</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">()</span>

<div class="viewcode-block" id="SchoolManagementApp.create_main_menu">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_main_menu">[docs]</a>
    <span class="k">def</span> <span class="nf">create_main_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the main menu user interface.</span>

<span class="sd">        This method creates the main menu with various buttons allowing users </span>
<span class="sd">        to navigate between different functionalities, such as adding students, </span>
<span class="sd">        instructors, courses, registering for courses, viewing records, </span>
<span class="sd">        searching, and exporting data to CSV. Each button is linked to a specific </span>
<span class="sd">        form or action in the application.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">title_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;School Management System&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 20px; font-weight: bold;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">title_label</span><span class="p">)</span>

        <span class="c1"># Add buttons for navigating to different forms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Student&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_student_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Instructor&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_instructor_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Course&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_course_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Register for Course&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_register_course_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Assign Instructor&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_assign_instructor_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_button</span><span class="p">)</span>

            <span class="c1"># New buttons for viewing all students, instructors, and courses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_students_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;View All Students&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_students_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_all_students</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view_students_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view_instructors_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;View All Instructors&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_instructors_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_all_instructors</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view_instructors_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">view_courses_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;View All Courses&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">view_courses_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_all_courses</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view_courses_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">search_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_search_form</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_button</span><span class="p">)</span>

            <span class="c1"># Export to CSV button</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_csv_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Export to CSV&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_csv_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_to_csv</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_csv_button</span><span class="p">)</span>


        <span class="c1"># Set layout for the main menu widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_menu_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_student_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_student_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_student_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the form to add a new student.</span>

<span class="sd">        This method generates a user interface for adding students. It provides </span>
<span class="sd">        input fields for the student&#39;s name, age, email, and student ID, along </span>
<span class="sd">        with buttons for submitting the data or returning to the main menu. </span>
<span class="sd">        Validation is performed on the input before submission.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">title_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Student&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 16px;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">title_label</span><span class="p">)</span>

        <span class="c1"># Fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_name_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Age&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_age_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Email&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_email_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Student ID&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_id_field</span><span class="p">)</span>

        <span class="c1"># Add button to submit</span>
        <span class="n">add_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">add_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_student</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_button</span><span class="p">)</span>

        <span class="c1"># Back button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the student widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_instructor_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_instructor_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_instructor_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the form to add a new instructor.</span>

<span class="sd">        This method generates a user interface for adding instructors. It provides </span>
<span class="sd">        input fields for the instructor&#39;s name, age, email, and instructor ID, </span>
<span class="sd">        along with buttons to submit the form and return to the main menu. </span>
<span class="sd">        Input validation is performed to ensure data correctness.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">title_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Instructor&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 16px;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">title_label</span><span class="p">)</span>

        <span class="c1"># Fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Age&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Email&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Instructor ID&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_field</span><span class="p">)</span>

        <span class="c1"># Add button to submit</span>
        <span class="n">add_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">add_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_instructor</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_button</span><span class="p">)</span>

        <span class="c1"># Back button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the instructor widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_course_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_course_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_course_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the form to add a new course.</span>

<span class="sd">        This method generates a user interface for adding new courses. It provides </span>
<span class="sd">        input fields for the course ID and course name. A button is included for </span>
<span class="sd">        submitting the form data, which validates the input before storing the </span>
<span class="sd">        course information.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">title_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Course&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">AlignCenter</span><span class="p">)</span>
        <span class="n">title_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 16px;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">title_label</span><span class="p">)</span>

        <span class="c1"># Fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Course ID&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_id_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Course Name&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_name_field</span><span class="p">)</span>

        <span class="c1"># Add button to submit</span>
        <span class="n">add_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">add_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_course</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">add_button</span><span class="p">)</span>

        <span class="c1"># Back button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the course widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_register_course_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_register_course_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_register_course_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the form to register a student for a course.</span>

<span class="sd">        This method generates a user interface that allows students to register </span>
<span class="sd">        for courses. The form includes fields for the student ID and a dropdown </span>
<span class="sd">        list of available courses. A button for registration and another for </span>
<span class="sd">        returning to the main menu are included.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_widget</span><span class="p">)</span>

        <span class="n">register_course_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Register for Course&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">register_course_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 16px;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">register_course_label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_student_id_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_student_id_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Student ID&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_student_id_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_course_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_courses_into_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_dropdown</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_dropdown</span><span class="p">)</span>

        <span class="n">register_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Register&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">register_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_student_for_course</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">register_button</span><span class="p">)</span>

        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="SchoolManagementApp.create_assign_instructor_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_assign_instructor_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_assign_instructor_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates the form to assign an instructor to a course.</span>

<span class="sd">        This method generates a user interface that allows assigning instructors </span>
<span class="sd">        to courses. It includes input fields for the instructor ID and a dropdown </span>
<span class="sd">        list of available courses. Buttons for assigning the instructor and </span>
<span class="sd">        returning to the main menu are also included.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_widget</span><span class="p">)</span>

        <span class="n">assign_instructor_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Assign Instructor to Course&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">assign_instructor_label</span><span class="o">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s2">&quot;font-size: 16px;&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">assign_instructor_label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_id_field</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_id_field</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Instructor ID&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_id_field</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assign_course_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_courses_into_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_course_dropdown</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_course_dropdown</span><span class="p">)</span>

        <span class="n">assign_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Assign&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">assign_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_to_course</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">assign_button</span><span class="p">)</span>

        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_display_students_view">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_display_students_view">[docs]</a>
    <span class="k">def</span> <span class="nf">create_display_students_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the table view of all students.</span>

<span class="sd">        This method creates a table view that lists all students stored in the </span>
<span class="sd">        system. It fetches student data from the database and uses a QTableView </span>
<span class="sd">        to present the information. A back button is included to return to the </span>
<span class="sd">        main menu.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_all_students</span><span class="p">()</span>  <span class="c1"># This will fetch the data and call create_display_table</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_display_instructors_view">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_display_instructors_view">[docs]</a>
    <span class="k">def</span> <span class="nf">create_display_instructors_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the table view of all instructors.</span>

<span class="sd">        This method creates a table view that lists all instructors stored in the </span>
<span class="sd">        system. It fetches instructor data from the database and uses a QTableView </span>
<span class="sd">        to display the information. A back button is included to return to the </span>
<span class="sd">        main menu.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Create table view to display instructors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructors_table</span> <span class="o">=</span> <span class="n">QTableView</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructors_table</span><span class="p">)</span>

        <span class="c1"># Back to Main Menu button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_instructors_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.create_display_courses_view">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_display_courses_view">[docs]</a>
    <span class="k">def</span> <span class="nf">create_display_courses_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the table view of all courses.</span>

<span class="sd">        This method creates a table view that lists all courses available in the </span>
<span class="sd">        system. It fetches course data from the database and uses a QTableView </span>
<span class="sd">        to present the information. A back button is included to return to the </span>
<span class="sd">        main menu.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Create table view to display courses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">courses_table</span> <span class="o">=</span> <span class="n">QTableView</span><span class="p">()</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">courses_table</span><span class="p">)</span>

        <span class="c1"># Back to Main Menu button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_courses_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_main_menu">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_main_menu">[docs]</a>
    <span class="k">def</span> <span class="nf">show_main_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the main menu.</span>

<span class="sd">        This method sets the current widget to the main menu widget, allowing the</span>
<span class="sd">        user to navigate to different parts of the application from the main menu.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">main_menu_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_student_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_student_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_student_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the student form.</span>

<span class="sd">        This method switches the current widget to the student form widget, where </span>
<span class="sd">        users can add or view student information.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_instructor_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_instructor_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_instructor_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the instructor form.</span>

<span class="sd">        This method switches the current widget to the instructor form widget, </span>
<span class="sd">        allowing users to add or view instructor details.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_course_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_course_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_course_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the course form.</span>

<span class="sd">        This method switches the current widget to the course form widget, where </span>
<span class="sd">        users can add or manage courses in the system.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_register_course_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_register_course_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_register_course_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the course registration form.</span>

<span class="sd">        This method refreshes the available courses list and switches the current </span>
<span class="sd">        widget to the course registration form, where students can register for courses.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_courses</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_assign_instructor_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_assign_instructor_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_assign_instructor_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the instructor assignment form.</span>

<span class="sd">        This method refreshes the list of available courses and switches the current </span>
<span class="sd">        widget to the instructor assignment form, allowing administrators to assign </span>
<span class="sd">        instructors to courses.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_courses</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_widget</span><span class="p">)</span></div>

     
<div class="viewcode-block" id="SchoolManagementApp.show_display_students">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_display_students">[docs]</a>
    <span class="k">def</span> <span class="nf">show_display_students</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the student records view.</span>

<span class="sd">        This method switches the current widget to the view displaying the list of </span>
<span class="sd">        all students in the system.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_students_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_display_instructors">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_display_instructors">[docs]</a>
    <span class="k">def</span> <span class="nf">show_display_instructors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the instructor records view.</span>

<span class="sd">        This method switches the current widget to the view displaying the list of </span>
<span class="sd">        all instructors in the system.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_instructors_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_display_courses">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_display_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">show_display_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the course records view.</span>

<span class="sd">        This method switches the current widget to the view displaying the list of </span>
<span class="sd">        all courses available in the system.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_courses_widget</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.show_search_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_search_form">[docs]</a>
    <span class="k">def</span> <span class="nf">show_search_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays the search form.</span>

<span class="sd">        This method switches the current widget to the search form, allowing the </span>
<span class="sd">        user to search for students, instructors, or courses within the system.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_widget</span><span class="p">)</span></div>

    
    <span class="c1"># Event handlers for adding a Student</span>
<div class="viewcode-block" id="SchoolManagementApp.add_student">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.add_student">[docs]</a>
    <span class="k">def</span> <span class="nf">add_student</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a student to the system.</span>

<span class="sd">        This method collects input data (name, age, email, student ID) from the </span>
<span class="sd">        student form, validates it, and then inserts the student record into the </span>
<span class="sd">        database. If validation fails or an error occurs during insertion, an error </span>
<span class="sd">        message is shown.</span>

<span class="sd">        :raises AssertionError: If any field is invalid or empty.</span>
<span class="sd">        :raises Exception: If there&#39;s any database or validation error.</span>
<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_name_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_age_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_email_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">student_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_id_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="c1"># Simple validation</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">age</span> <span class="ow">and</span> <span class="n">email</span> <span class="ow">and</span> <span class="n">student_id</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">assert</span><span class="p">(</span><span class="n">student_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;student_id cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z0-9]+$&quot;</span><span class="p">,</span> <span class="n">student_id</span><span class="p">),</span> <span class="s2">&quot;student_id must contain only alphanumeric characters&quot;</span>
                <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                <span class="k">assert</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
                <span class="k">assert</span> <span class="p">(</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Age cannot be negative&quot;</span>
                <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#39;</span>
                <span class="k">assert</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Wrong email format&quot;</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO students (student_id, name, age, email) VALUES (?, ?, ?, ?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student added successfully&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clear_student_fields</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;All fields must be filled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.clear_student_fields">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.clear_student_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_student_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the student form fields.</span>

<span class="sd">        This method resets the input fields (name, age, email, and student ID) in the</span>
<span class="sd">        student form, making them ready for the next entry.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


    <span class="c1"># Event handlers for adding an Instructor</span>
<div class="viewcode-block" id="SchoolManagementApp.add_instructor">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.add_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">add_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an instructor to the system.</span>

<span class="sd">        This method collects input data (name, age, email, instructor ID) from the </span>
<span class="sd">        instructor form, validates it, and then inserts the instructor record into </span>
<span class="sd">        the database. If validation fails or an error occurs during insertion, an </span>
<span class="sd">        error message is shown.</span>

<span class="sd">        :raises AssertionError: If any field is invalid or empty.</span>
<span class="sd">        :raises Exception: If there&#39;s any database or validation error.</span>
<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">instructor_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="c1"># Simple validation</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">age</span> <span class="ow">and</span> <span class="n">email</span> <span class="ow">and</span> <span class="n">instructor_id</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">assert</span><span class="p">(</span><span class="n">instructor_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;student_id cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z0-9]+$&quot;</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">),</span> <span class="s2">&quot;student_id must contain only alphanumeric characters&quot;</span>
               
                <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                <span class="k">assert</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">)</span>
                <span class="k">assert</span> <span class="p">(</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Age cannot be negative&quot;</span>
                <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#39;</span>
                <span class="k">assert</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Wrong email format&quot;</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO instructors (instructor_id, name, age, email) VALUES (?, ?, ?, ?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor added successfully&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clear_instructor_fields</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;All fields must be filled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.clear_instructor_fields">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.clear_instructor_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_instructor_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the instructor form fields.</span>

<span class="sd">        This method resets the input fields (name, age, email, and instructor ID) in the</span>
<span class="sd">        instructor form, making them ready for the next entry.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


    <span class="c1"># Event handlers for adding a Course</span>
<div class="viewcode-block" id="SchoolManagementApp.add_course">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.add_course">[docs]</a>
    <span class="k">def</span> <span class="nf">add_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a course to the system.</span>

<span class="sd">        This method collects input data (course ID and course name) from the course </span>
<span class="sd">        form, validates it, and then inserts the course record into the database. </span>
<span class="sd">        If validation fails or an error occurs during insertion, an error message is shown.</span>

<span class="sd">        :raises AssertionError: If any field is invalid or empty.</span>
<span class="sd">        :raises Exception: If there&#39;s any database or validation error.</span>
<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">course_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_id_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">course_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_name_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="c1"># Simple validation</span>
        <span class="k">if</span> <span class="n">course_id</span> <span class="ow">and</span> <span class="n">course_name</span><span class="p">:</span>
            
            <span class="k">try</span><span class="p">:</span>
                <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">course_name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                <span class="k">assert</span><span class="p">(</span><span class="n">course_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">course_name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                <span class="k">assert</span><span class="p">(</span><span class="n">course_id</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;student_id cannot be empty&quot;</span>
                <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z0-9]+$&quot;</span><span class="p">,</span> <span class="n">course_id</span><span class="p">),</span> <span class="s2">&quot;student_id must contain only alphanumeric characters&quot;</span>
               
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO courses (course_id, course_name) VALUES (?, ?)&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">))</span>
                <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Course added successfully&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clear_course_fields</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;All fields must be filled&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.clear_course_fields">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.clear_course_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">clear_course_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clears the course form fields.</span>

<span class="sd">        This method resets the input fields (course ID and course name) in the course form, </span>
<span class="sd">        making them ready for the next entry.</span>

<span class="sd">        :param None: This function does not accept parameters.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        :rtype: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_field</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>


    <span class="c1"># Load available courses into the dropdown</span>
<div class="viewcode-block" id="SchoolManagementApp.load_courses_into_dropdown">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.load_courses_into_dropdown">[docs]</a>
    <span class="k">def</span> <span class="nf">load_courses_into_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dropdown</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads available courses into a dropdown menu.</span>

<span class="sd">        Queries the database for all course IDs and populates the given dropdown menu with them.</span>
<span class="sd">        If no courses are found, it adds a &quot;No available courses&quot; message.</span>

<span class="sd">        :param dropdown: The dropdown widget to populate with course data.</span>
<span class="sd">        :type dropdown: QComboBox</span>
<span class="sd">        :raises sqlite3.Error: If there&#39;s a problem querying the database.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dropdown</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id FROM courses&quot;</span><span class="p">)</span>
            <span class="n">courses_data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span> 
            <span class="n">courses</span> <span class="o">=</span> <span class="p">[</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses_data</span><span class="p">]</span>  
           
        
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;An error occurred while loading courses: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">courses</span><span class="o">=</span><span class="p">[]</span> 
        <span class="k">if</span> <span class="n">courses</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
                <span class="n">dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">course</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;No available courses&quot;</span><span class="p">)</span></div>


    <span class="c1"># Register student for course</span>
<div class="viewcode-block" id="SchoolManagementApp.register_student_for_course">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.register_student_for_course">[docs]</a>
    <span class="k">def</span> <span class="nf">register_student_for_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a student for a selected course.</span>

<span class="sd">        Performs validation to ensure both student ID and course ID are valid,</span>
<span class="sd">        then registers the student in the `student_courses` table.</span>

<span class="sd">        :raises sqlite3.Error: If there&#39;s an issue with database operations.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">student_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_student_id_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">selected_course_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_course_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">student_id</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">selected_course_id</span><span class="p">:</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Please fill in all fields&quot;</span><span class="p">)</span>
        <span class="c1"># Simple validation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Simple validation</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT student_id from students where student_id = ?&quot;</span><span class="p">,(</span><span class="n">student_id</span><span class="p">,))</span>
                <span class="n">student_data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> 
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from courses where course_id = ?&quot;</span><span class="p">,(</span><span class="n">selected_course_id</span><span class="p">,))</span>
                <span class="n">course_data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> 

                <span class="k">if</span> <span class="n">student_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">course_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;INSERT INTO student_courses (student_id, course_id) VALUES (?, ?)&quot;</span><span class="p">,(</span><span class="n">student_id</span><span class="p">,</span><span class="n">selected_course_id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student registered for the course successfully&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">show_register_course_form</span><span class="p">()</span>  <span class="c1"># Refresh form</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Student or Course not found&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>

      
    <span class="c1"># Assign instructor to course</span>
<div class="viewcode-block" id="SchoolManagementApp.assign_instructor_to_course">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.assign_instructor_to_course">[docs]</a>
    <span class="k">def</span> <span class="nf">assign_instructor_to_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns an instructor to a selected course.</span>

<span class="sd">        Performs validation to ensure both instructor ID and course ID are valid,</span>
<span class="sd">        and that no instructor is already assigned to the course. Then updates the course with the new instructor.</span>

<span class="sd">        :raises sqlite3.Error: If there&#39;s an issue with database operations.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">instructor_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_id_field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">selected_course_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assign_course_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">instructor_id</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">selected_course_id</span><span class="p">:</span>
             <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Please fill in all fields&quot;</span><span class="p">)</span>
        <span class="c1"># Simple validation</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Simple validation</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT instructor_id from instructors where instructor_id = ?&quot;</span><span class="p">,(</span><span class="n">instructor_id</span><span class="p">,))</span>
                <span class="n">instructor_data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> 
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from courses where course_id = ?&quot;</span><span class="p">,(</span><span class="n">selected_course_id</span><span class="p">,))</span>
                <span class="n">course_data</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span> 
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT instructor_id from courses where course_id = ? &quot;</span><span class="p">,(</span><span class="n">selected_course_id</span><span class="p">,))</span>
                <span class="n">current_inst</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">instructor_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">course_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">current_inst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE courses SET instructor_id = ? WHERE course_id = ?&quot;</span><span class="p">,(</span><span class="n">instructor_id</span><span class="p">,</span><span class="n">selected_course_id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Instructor  assigned to course successfully&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">show_assign_instructor_form</span><span class="p">()</span>  <span class="c1"># Refresh form</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor or Course not found or already there is an instructor&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>

      
           

    <span class="c1"># Create display table function for students, instructors, and courses</span>
<div class="viewcode-block" id="SchoolManagementApp.create_display_table">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_display_table">[docs]</a>
    <span class="k">def</span> <span class="nf">create_display_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a display table for students, instructors, or courses.</span>

<span class="sd">        This function creates a table and populates it with data. It also provides</span>
<span class="sd">        Edit, Delete, and Back buttons to manage records.</span>

<span class="sd">        :param headers: The column headers for the table.</span>
<span class="sd">        :type headers: list[str]</span>
<span class="sd">        :param data: The table&#39;s data to be displayed.</span>
<span class="sd">        :type data: list[tuple]</span>
<span class="sd">        :param category: The type of entity being displayed (student, instructor, or course).</span>
<span class="sd">        :type category: str</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">display_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>  <span class="c1"># Create a new widget for the table and controls</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="c1"># Create the table and populate it with data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">headers</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">setSelectionBehavior</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">SelectRows</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row_index</span><span class="p">,</span> <span class="n">row_data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">row_data</span><span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="n">item</span><span class="o">.</span><span class="n">setFlags</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">flags</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">~</span><span class="n">Qt</span><span class="o">.</span><span class="n">ItemIsEditable</span><span class="p">)</span>  <span class="c1"># Make item non-editable</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_index</span><span class="p">,</span> <span class="n">col_index</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>

        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="p">)</span>
        <span class="c1"># Add Edit and Delete buttons</span>
        <span class="n">edit_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Edit&quot;</span><span class="p">)</span>
        <span class="n">edit_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_edit</span><span class="p">(</span><span class="n">category</span><span class="p">))</span>  <span class="c1"># Handles edit logic</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">edit_button</span><span class="p">)</span>

        <span class="n">delete_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Delete&quot;</span><span class="p">)</span>
        <span class="n">delete_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_record</span><span class="p">(</span><span class="n">category</span><span class="p">))</span>  <span class="c1"># Handles delete logic</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">delete_button</span><span class="p">)</span>

        <span class="c1"># Add a Back to Main Menu button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the display widget</span>
        <span class="n">display_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Add the new widget to the stacked widget and display it</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">display_widget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stacked_widget</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="n">display_widget</span><span class="p">)</span></div>


    <span class="c1"># Display all students, instructors, courses</span>
<div class="viewcode-block" id="SchoolManagementApp.display_all_students">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.display_all_students">[docs]</a>
    <span class="k">def</span> <span class="nf">display_all_students</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays all students with their registered courses.</span>

<span class="sd">        Fetches student data from the database and compiles a list of courses each student is registered for.</span>
<span class="sd">        The result is displayed in a table format.</span>

<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students;&quot;</span><span class="p">)</span>
        <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="c1">#print(s[0])</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from student_courses where student_id  = ?&quot;</span><span class="p">,(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
            <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="c1"># Prepare the data for display</span>
           
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">])))</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Student ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="s2">&quot;Registered Courses&quot;</span><span class="p">]</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;student&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.display_all_instructors">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.display_all_instructors">[docs]</a>
    <span class="k">def</span> <span class="nf">display_all_instructors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays all instructors with the courses they teach.</span>

<span class="sd">        Fetches instructor data from the database and compiles a list of courses each instructor teaches.</span>
<span class="sd">        The result is displayed in a table format.</span>

<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM instructors;&quot;</span><span class="p">)</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from courses where instructor_id = ?&quot;</span><span class="p">,(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
            <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="c1"># Prepare the data for display</span>
            
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">])))</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Instructor ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="s2">&quot;Courses Taught&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;instructor&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.display_all_courses">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.display_all_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">display_all_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays all courses along with their enrolled students.</span>

<span class="sd">        Fetches course data from the database and compiles a list of students enrolled in each course.</span>
<span class="sd">        The result is displayed in a table format.</span>

<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM courses;&quot;</span><span class="p">)</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT student_id from student_courses where course_id = ?&quot;</span><span class="p">,(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
            <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="c1"># Prepare the data for display</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">student</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">])))</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Course ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Course Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Enrolled Students&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;course&quot;</span><span class="p">)</span></div>


     <span class="c1"># Function to perform the search</span>
 
    <span class="c1"># Search functionality</span>
<div class="viewcode-block" id="SchoolManagementApp.create_search_form">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.create_search_form">[docs]</a>
    <span class="k">def</span> <span class="nf">create_search_form</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a form to search for students, instructors, or courses.</span>

<span class="sd">        Provides dropdowns to choose search criteria (ID or Name) and the category to search (Student, Instructor, or Course).</span>
<span class="sd">        Includes an input field for entering the search value.</span>

<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">search_by_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search By&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_by_label</span><span class="p">)</span>

        <span class="c1"># Dropdown to select search by (ID or Name)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_by_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_by_dropdown</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">])</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_by_dropdown</span><span class="p">)</span>

        <span class="n">search_in_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search In&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_in_label</span><span class="p">)</span>

        <span class="c1"># Dropdown to select search in (Student, Instructor, Course)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_in_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_in_dropdown</span><span class="o">.</span><span class="n">addItems</span><span class="p">([</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="s2">&quot;Course&quot;</span><span class="p">])</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_in_dropdown</span><span class="p">)</span>

        <span class="c1"># Search value input</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_value_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_value_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter value to search&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_value_input</span><span class="p">)</span>

        <span class="c1"># Search button</span>
        <span class="n">search_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Search&quot;</span><span class="p">)</span>
        <span class="n">search_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">perform_search</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">search_button</span><span class="p">)</span>

        <span class="c1"># Back to Main Menu button</span>
        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back to Main Menu&quot;</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">show_main_menu</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="c1"># Set layout for the search widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.perform_search">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.perform_search">[docs]</a>
    <span class="k">def</span> <span class="nf">perform_search</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Performs a search for students, instructors, or courses based on user input.</span>

<span class="sd">        Queries the database based on selected category and search criteria (ID or Name),</span>
<span class="sd">        and displays the results in a table.</span>

<span class="sd">        :raises sqlite3.Error: If there&#39;s an issue with database operations.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">search_by</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_by_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">search_in</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_in_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">search_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_value_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">search_value</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="s2">&quot;Please enter a search value.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># Perform search based on category and search_by</span>
       
        <span class="k">if</span> <span class="n">search_in</span> <span class="o">==</span> <span class="s2">&quot;Student&quot;</span><span class="p">:</span> 
            <span class="k">if</span> <span class="n">search_by</span> <span class="o">==</span> <span class="s2">&quot;ID&quot;</span><span class="p">:</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students where student_id = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Search by Name</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM students where name = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">students</span><span class="p">:</span>
                <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
                <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from student_courses where student_id  = ?&quot;</span><span class="p">,(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
                    <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">])))</span>

                <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Student ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="s2">&quot;Registered Courses&quot;</span><span class="p">]</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;student&quot;</span><span class="p">)</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;No Results&quot;</span><span class="p">,</span> <span class="s2">&quot;No student found.&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">search_in</span> <span class="o">==</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">search_by</span> <span class="o">==</span> <span class="s2">&quot;ID&quot;</span><span class="p">:</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM instructors where instructor_id = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">instructors</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Search by Name</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM instructors where name = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">instructors</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">instructors</span><span class="p">:</span>
                    <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
                        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT course_id from courses where instructor_id = ?&quot;</span><span class="p">,(</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
                        <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
                    <span class="c1"># Prepare the data for display</span>
                        
                        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">i</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">])))</span>
                    <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Instructor ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="s2">&quot;Courses Taught&quot;</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;instructor&quot;</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;No Results&quot;</span><span class="p">,</span> <span class="s2">&quot;No instructor found.&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">search_in</span> <span class="o">==</span> <span class="s2">&quot;Course&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">search_by</span> <span class="o">==</span> <span class="s2">&quot;ID&quot;</span><span class="p">:</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM courses where course_id = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># Search by Name</span>
                <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT * FROM courses where course_name = ?;&quot;</span><span class="p">,(</span><span class="n">search_value</span><span class="p">,))</span>
                <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
            <span class="n">data</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">if</span> <span class="n">courses</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;SELECT student_id from student_courses where course_id = ?&quot;</span><span class="p">,(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],))</span>
                    <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
                <span class="c1"># Prepare the data for display</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">student</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">])))</span>

                <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Course ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Course Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Enrolled Students&quot;</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">create_display_table</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="s2">&quot;course&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="s2">&quot;No Results&quot;</span><span class="p">,</span> <span class="s2">&quot;No course found.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.save_edit">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.save_edit">[docs]</a>
    <span class="k">def</span> <span class="nf">save_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Saves edits made to a student, instructor, or course record.</span>

<span class="sd">        Opens an edit dialog for the selected record, allowing users to make changes.</span>
<span class="sd">        After saving, it refreshes the relevant table display.</span>

<span class="sd">        :param category: The type of entity being edited (student, instructor, or course).</span>
<span class="sd">        :type category: str</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">selected_items</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> selected for editing.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># Get the selected row</span>
        <span class="n">selected_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">currentRow</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_row</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>  <span class="c1"># Check if a row is actually selected</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> selected for deletion.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">selected_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">selected_items</span><span class="p">]</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">EditDialog</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="n">selected_data</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;student&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_all_students</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;instructor&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_all_instructors</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;course&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_all_courses</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementApp.delete_record">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.delete_record">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deletes a student, instructor, or course record.</span>

<span class="sd">        Prompts the user for confirmation, and if confirmed, deletes the selected record</span>
<span class="sd">        from the database and refreshes the relevant table display.</span>

<span class="sd">        :param category: The type of entity being deleted (student, instructor, or course).</span>
<span class="sd">        :type category: str</span>
<span class="sd">        :raises sqlite3.Error: If there&#39;s an issue with database operations.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">selectedItems</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">selected_items</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> selected for deletion.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># Get the selected row</span>
        <span class="n">selected_row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_table</span><span class="o">.</span><span class="n">currentRow</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">selected_row</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>  <span class="c1"># Check if a row is actually selected</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Warning&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;No </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2"> selected for deletion.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
       
        <span class="n">selected_id</span> <span class="o">=</span> <span class="n">selected_items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
       


       
        <span class="n">confirm</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Confirm Delete&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Are you sure you want to delete this </span><span class="si">{</span><span class="n">category</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">confirm</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;student&quot;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM students where student_id = ?&quot;</span><span class="p">,(</span><span class="n">selected_id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;instructor&quot;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM instructors where instructor_id = ?&quot;</span><span class="p">,(</span><span class="n">selected_id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;course&quot;</span><span class="p">:</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE FROM courses where course_id = ?&quot;</span><span class="p">,(</span><span class="n">selected_id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                    

                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">category</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2"> deleted successfully!&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;student&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">display_all_students</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;instructor&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">display_all_instructors</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;course&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">display_all_courses</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>

       
<div class="viewcode-block" id="SchoolManagementApp.refresh_courses">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.refresh_courses">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh_courses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refreshes the course dropdowns for registering students or assigning instructors.</span>

<span class="sd">        Reloads available courses into the `assign_course_dropdown` and `register_course_dropdown` widgets.</span>

<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_courses_into_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_course_dropdown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_courses_into_dropdown</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_course_dropdown</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.load_courses_from_db">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.load_courses_from_db">[docs]</a>
    <span class="k">def</span> <span class="nf">load_courses_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads course data from the database.</span>

<span class="sd">        Retrieves course details, including the course name, ID, instructor information, and enrolled students.</span>

<span class="sd">        :returns: list[tuple]: A list of course data, including course name, ID, instructor email, instructor ID, and enrolled students.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT c.course_name, c.course_id, i.email, i.instructor_id,</span>
<span class="s2">            GROUP_CONCAT(sc.student_id) as enrolled_students</span>
<span class="s2">            FROM courses c</span>
<span class="s2">            LEFT JOIN instructors i ON c.instructor_id = i.instructor_id</span>
<span class="s2">            LEFT JOIN student_courses sc ON sc.course_id = c.course_id</span>
<span class="s2">            GROUP BY c.course_id;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementApp.load_instructors_from_db">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.load_instructors_from_db">[docs]</a>
    <span class="k">def</span> <span class="nf">load_instructors_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads instructor data from the database.</span>

<span class="sd">        Retrieves instructor details, including the instructor&#39;s name, age, email, and courses assigned to them.</span>

<span class="sd">        :returns: list[tuple]: A list of instructor data, including name, age, email, instructor ID, and assigned courses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT i.name, i.age, i.email, i.instructor_id,</span>
<span class="s2">            GROUP_CONCAT(c.course_id) as assigned_courses</span>
<span class="s2">            FROM instructors i</span>
<span class="s2">            LEFT JOIN courses c ON c.instructor_id = i.instructor_id</span>
<span class="s2">            GROUP BY i.instructor_id;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementApp.load_students_from_db">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.load_students_from_db">[docs]</a>
    <span class="k">def</span> <span class="nf">load_students_from_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads student data from the database.</span>

<span class="sd">        Retrieves student details, including the student&#39;s name, age, email, and registered courses.</span>

<span class="sd">        :returns: list[tuple]: A list of student data, including name, age, email, student ID, and registered courses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT s.name, s.age, s.email, s.student_id,</span>
<span class="s2">            GROUP_CONCAT(sc.course_id) as registered_courses</span>
<span class="s2">            FROM students s</span>
<span class="s2">            LEFT JOIN student_courses sc ON sc.student_id = s.student_id</span>
<span class="s2">            GROUP BY s.student_id;</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementApp.export_to_csv">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.export_to_csv">[docs]</a>
    <span class="k">def</span> <span class="nf">export_to_csv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports data for students, instructors, and courses to CSV files.</span>

<span class="sd">        Fetches the relevant data from the database and exports them into separate CSV files for students, instructors, and courses.</span>
<span class="sd">        Filenames include a timestamp for uniqueness.</span>

<span class="sd">        :raises Exception: If an error occurs during data export.</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get current timestamp for filenames</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%f</span><span class="s2">&quot;</span><span class="p">)</span>
            
            <span class="c1"># Define filenames for each type</span>
            <span class="n">filenames</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;students&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;CSV/students_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
                <span class="s1">&#39;instructors&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;CSV/instructors_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
                <span class="s1">&#39;courses&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;CSV/courses_</span><span class="si">{</span><span class="n">timestamp</span><span class="si">}</span><span class="s2">.csv&quot;</span>
            <span class="p">}</span>

            <span class="c1"># Export courses</span>
            <span class="n">courses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_courses_from_db</span><span class="p">()</span>  <span class="c1"># Updated to fetch data from DB</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_data</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="s1">&#39;courses&#39;</span><span class="p">],</span> <span class="n">courses</span><span class="p">,</span> 
                            <span class="p">[</span><span class="s1">&#39;Course Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Course ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Instructor Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Instructor ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Enrolled Students&#39;</span><span class="p">],</span> 
                            <span class="k">lambda</span> <span class="n">course</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s1">&#39;Course Name&#39;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="s1">&#39;Course ID&#39;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="s1">&#39;Instructor Email&#39;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Instructor ID&#39;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                                <span class="s1">&#39;Enrolled Students&#39;</span><span class="p">:</span> <span class="n">course</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                            <span class="p">})</span>

            <span class="c1"># Export instructors</span>
            <span class="n">instructors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_instructors_from_db</span><span class="p">()</span>  <span class="c1"># Updated to fetch data from DB</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_data</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="s1">&#39;instructors&#39;</span><span class="p">],</span> <span class="n">instructors</span><span class="p">,</span>
                            <span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Instructor ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Assigned Courses&#39;</span><span class="p">],</span>
                            <span class="k">lambda</span> <span class="n">instructor</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="s1">&#39;Age&#39;</span><span class="p">:</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="s1">&#39;Email&#39;</span><span class="p">:</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                <span class="s1">&#39;Instructor ID&#39;</span><span class="p">:</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                <span class="s1">&#39;Assigned Courses&#39;</span><span class="p">:</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                            <span class="p">})</span>

            <span class="c1"># Export students</span>
            <span class="n">students</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_students_from_db</span><span class="p">()</span>  <span class="c1"># Updated to fetch data from DB</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">export_data</span><span class="p">(</span><span class="n">filenames</span><span class="p">[</span><span class="s1">&#39;students&#39;</span><span class="p">],</span> <span class="n">students</span><span class="p">,</span>
                            <span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Email&#39;</span><span class="p">,</span> <span class="s1">&#39;Student ID&#39;</span><span class="p">,</span> <span class="s1">&#39;Registered Courses&#39;</span><span class="p">],</span>
                            <span class="k">lambda</span> <span class="n">student</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                <span class="s1">&#39;Age&#39;</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
                                <span class="s1">&#39;Email&#39;</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                                <span class="s1">&#39;Student ID&#39;</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
                                <span class="s1">&#39;Registered Courses&#39;</span><span class="p">:</span> <span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                            <span class="p">})</span>

            <span class="c1"># Show success message</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Data successfully exported to CSV files.&quot;</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Information</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Show error message if something goes wrong</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_message_box</span><span class="p">(</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Failed to export data: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Critical</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementApp.export_data">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.export_data">[docs]</a>
    <span class="k">def</span> <span class="nf">export_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">fieldnames</span><span class="p">,</span> <span class="n">row_mapper</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Exports a list of data to a CSV file.</span>

<span class="sd">        Writes the data to a CSV file with the specified fieldnames and uses the provided row_mapper</span>
<span class="sd">        to convert data rows into dictionaries.</span>

<span class="sd">        :param filename: The file path for the CSV file.</span>
<span class="sd">        :type filename: str</span>
<span class="sd">        :param data: The data to be written to the CSV file.</span>
<span class="sd">        :type data: list[tuple]</span>
<span class="sd">        :param fieldnames: The header names for the CSV file.</span>
<span class="sd">        :type fieldnames: list[str]</span>
<span class="sd">        :param row_mapper: A function that maps a data tuple to a dictionary for CSV export.</span>
<span class="sd">        :type row_mapper: function</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">csvfile</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fieldnames</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">row_mapper</span><span class="p">(</span><span class="n">item</span><span class="p">))</span></div>


    <span class="c1"># Helper function to show message boxes</span>
<div class="viewcode-block" id="SchoolManagementApp.show_message_box">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.SchoolManagementApp.show_message_box">[docs]</a>
    <span class="k">def</span> <span class="nf">show_message_box</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">icon_type</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays a message box with the given title, message, and icon type.</span>

<span class="sd">        :param title: The title of the message box.</span>
<span class="sd">        :type title: str</span>
<span class="sd">        :param message: The message to display in the box.</span>
<span class="sd">        :type message: str</span>
<span class="sd">        :param icon_type: The icon type (information, warning, or critical).</span>
<span class="sd">        :type icon_type: QMessageBox.Icon</span>
<span class="sd">        :returns: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg_box</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="n">icon_type</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">msg_box</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span></div>
</div>


<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QFormLayout</span><span class="p">,</span> <span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QPushButton</span><span class="p">,</span> <span class="n">QLabel</span><span class="p">,</span> <span class="n">QMessageBox</span>

<div class="viewcode-block" id="EditDialog">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.EditDialog">[docs]</a>
<span class="k">class</span> <span class="nc">EditDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Dialog for editing student, instructor, or course information.</span>

<span class="sd">    This dialog allows users to modify the details of a selected entity </span>
<span class="sd">    (student, instructor, or course). It presents input fields based on </span>
<span class="sd">    the specified category and includes functionality to validate and </span>
<span class="sd">    update the data in the database.</span>

<span class="sd">    :param category: The category of the item to be edited (e.g., &quot;student&quot;, &quot;instructor&quot;, &quot;course&quot;).</span>
<span class="sd">    :param data: The original data of the item to be edited, which is displayed in the input fields.</span>
<span class="sd">    :param parent: The parent widget for the dialog (default is None).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the EditDialog.</span>

<span class="sd">        :param category: The category of the item to be edited.</span>
<span class="sd">        :param data: The original data of the item to be edited.</span>
<span class="sd">        :param parent: The parent widget for the dialog.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Edit </span><span class="si">{</span><span class="n">category</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">category</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>

<div class="viewcode-block" id="EditDialog.initUI">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.EditDialog.initUI">[docs]</a>
    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the user interface for the edit dialog.</span>

<span class="sd">        This method sets up the layout and input fields based on the selected</span>
<span class="sd">        category (student, instructor, or course). It includes buttons for </span>
<span class="sd">        saving changes and going back to the previous screen.</span>

<span class="sd">        :raises QMessageBox: If an unknown category is provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QFormLayout</span><span class="p">()</span>

        <span class="c1"># Create and populate fields based on category</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;student&quot;</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;instructor&quot;</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;course&quot;</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Course Name&quot;</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown category for editing.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">()</span>
            <span class="k">return</span>

        <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">indices</span><span class="p">):</span>
            <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="n">label</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_line_edit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>

        <span class="n">save_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Save Changes&quot;</span><span class="p">)</span>
        <span class="n">save_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_changes</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">save_button</span><span class="p">)</span>

        <span class="n">back_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Back&quot;</span><span class="p">)</span>
        <span class="n">back_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>  <span class="c1"># Close dialog</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addRow</span><span class="p">(</span><span class="n">back_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span></div>


<div class="viewcode-block" id="EditDialog.create_line_edit">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.EditDialog.create_line_edit">[docs]</a>
    <span class="k">def</span> <span class="nf">create_line_edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a line edit widget pre-populated with text.</span>

<span class="sd">        :param text: The text to display in the line edit.</span>
<span class="sd">        :return: A QLineEdit widget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">line_edit</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="n">line_edit</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">line_edit</span>
        <span class="k">return</span> <span class="n">line_edit</span></div>


<div class="viewcode-block" id="EditDialog.save_changes">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.EditDialog.save_changes">[docs]</a>
    <span class="k">def</span> <span class="nf">save_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Save the changes made in the dialog and update the database.</span>

<span class="sd">        This method validates the input data based on the selected category</span>
<span class="sd">        and updates the corresponding record in the database. Validations include:</span>
<span class="sd">        </span>
<span class="sd">        - For students and instructors:</span>
<span class="sd">          - Name must be a non-empty string containing only alphabetic characters.</span>
<span class="sd">          - Age must be a non-negative integer.</span>
<span class="sd">          - Email must follow a valid format.</span>
<span class="sd">        </span>
<span class="sd">        - For courses:</span>
<span class="sd">          - Course name must be a non-empty string.</span>

<span class="sd">        Displays a success message upon successful update, or an error message </span>
<span class="sd">        if validation fails or an error occurs during the database operation.</span>

<span class="sd">        :raises Exception: If there is an error during the database update.</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">updated_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">field</span><span class="o">.</span><span class="n">text</span><span class="p">()</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;student&quot;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">updated_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                    <span class="k">assert</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                    <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                    <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">updated_data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Age cannot be negative&quot;</span>
                    <span class="n">email</span> <span class="o">=</span> <span class="n">updated_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#39;</span>
                    <span class="k">assert</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Wrong email format&quot;</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE students SET name = ?, age = ?, email = ? where student_id = ?&quot;</span><span class="p">,(</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">email</span><span class="p">,</span><span class="nb">id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;instructor&quot;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">updated_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                    <span class="k">assert</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                    <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                    <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">updated_data</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">),</span> <span class="s2">&quot;Age cannot be negative&quot;</span>
                    <span class="n">email</span> <span class="o">=</span> <span class="n">updated_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$&#39;</span>
                    <span class="k">assert</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">),</span> <span class="s2">&quot;Wrong email format&quot;</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE instructors SET name = ?, age = ?, email = ? where instructor_id = ?&quot;</span><span class="p">,(</span><span class="n">name</span><span class="p">,</span><span class="n">age</span><span class="p">,</span><span class="n">email</span><span class="p">,</span><span class="nb">id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
                   
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;course&quot;</span><span class="p">:</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">updated_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="k">assert</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">),</span> <span class="s2">&quot;Name must be a string&quot;</span> 
                    <span class="k">assert</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="s2">&quot;name cannot be empty&quot;</span>
                    <span class="k">assert</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^[a-zA-Z\s]+$&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">),</span> <span class="s2">&quot;Name must contain only alphabetic characters and spaces&quot;</span>
                    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;UPDATE courses SET course_name = ? where course_id = ?&quot;</span><span class="p">,(</span><span class="n">name</span><span class="p">,</span><span class="nb">id</span><span class="p">,))</span>
                    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2"> updated successfully!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../../lab3.html#lab3.main_PyQt5_sql.main">[docs]</a>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the main application.</span>

<span class="sd">    This function initializes the QApplication, creates the main window,</span>
<span class="sd">    and starts the application event loop. The application will exit when</span>
<span class="sd">    the main window is closed.</span>

<span class="sd">    :returns: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">SchoolManagementApp</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Toufic.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>